(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},40:function(e,t){},517:function(e,t,a){},518:function(e,t,a){"use strict";a.r(t);var s=a(2),c=a(76),n=a.n(c),i=a(6),l=a(8),r=a(4),o=(a(83),a(0));var d=function(){return Object(o.jsx)("footer",{children:Object(o.jsx)("div",{className:" footer navbar-dark footer-border",children:Object(o.jsx)("p",{id:"footer-text",className:"text-center mt-2 text-light",children:"\xa9 Haggle.\xa0 All Rights Reserved"})})})},j=(a(85),function(e){var t=e.loggedIn,a=Object(s.useState)(!1),c=Object(r.a)(a,2),n=c[0];c[1];return n?Object(o.jsx)(l.a,{to:"/listings"}):Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{className:"btn btn-primary",style:{background:"transparent",marginBottom:"30px"},type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions",children:Object(o.jsx)("i",{className:"bi bi-list","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"})}),Object(o.jsxs)("div",{className:"offcanvas offcanvas-start","data-bs-scroll":"true",tabIndex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel",children:[Object(o.jsxs)("div",{className:"offcanvas-header",children:[Object(o.jsxs)("h3",{className:"offcanvas-title",id:"offcanvasWithBothOptionsLabel",role:"button",href:"/",children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})}),Object(o.jsx)("a",{className:"haggle",role:"button",href:"/",children:"Haggle"})]}),Object(o.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),Object(o.jsx)("div",{className:"offcanvas-body",children:Object(o.jsxs)("nav",{className:"nav flex-column",children:[Object(o.jsx)("a",{className:"nav-link active","aria-current":"page",role:"button",href:"/listings",children:"Listings"}),t?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("a",{className:"nav-link",role:"button",href:"/profile",children:"Profile"}),Object(o.jsx)("a",{className:"nav-link",role:"button",onClick:function(){console.log("logout button"),localStorage.clear(),window.location.replace("/")},children:"Logout"})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("a",{className:"nav-link",role:"button",href:"/login",children:"Login"}),Object(o.jsx)("a",{className:"nav-link",role:"button",href:"/signup",children:"Signup"})]}),Object(o.jsx)(d,{})]})})]})]})}),b=(a(90),a(16));var u=function(){var e=localStorage.getItem("userId"),t=Object(s.useState)(!1),a=Object(r.a)(t,2),c=a[0],n=a[1];return Object(s.useEffect)((function(){e&&n(!0)}),[]),Object(o.jsxs)("header",{className:"display-flex justify-space-between align-center p-2",children:[Object(o.jsx)(j,{loggedIn:c}),Object(o.jsxs)("h1",{id:"haggle",children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})}),Object(o.jsx)("a",{className:"no-button nav-btn",role:"button",href:"/",children:"Haggle"})]}),c?Object(o.jsx)("button",{className:"no-button nav-btn",id:"login",role:"button",onClick:function(){console.log("logout button"),localStorage.clear(),n(!1),window.location.replace("/")},children:Object(o.jsx)(b.a,{})}):Object(o.jsx)("a",{className:"no-button nav-btn",id:"login",role:"button",href:"/login",children:Object(o.jsx)(b.d,{})})]})},m=a(5),h=a.n(m),x={getListings:function(){return h.a.get("/api/listings")},getListing:function(e){return h.a.get("/api/listings/"+e)},deleteListing:function(e){return h.a.delete("/api/listings/"+e)},saveListing:function(e){return h.a.post("/api/listing",e)},updateListing:function(e){return h.a.put("/api/listings/edit/"+e)},editListing:function(e){return h.a.get("/api/listings/edit/"+e)},getUsers:function(){return h.a.get("/api/users")},getUser:function(e){return h.a.get("/api/users/"+e)},createUser:function(e){return h.a.post("/api/users",e)},updateUser:function(e){return h.a.put("/api/users/id",e)},verifyUser:function(e){return console.log(e),h.a.post("/api/login",e)}},g=function(){return Object(o.jsx)("div",{children:Object(o.jsx)(i.b,{to:"/signup",children:Object(o.jsx)("button",{className:"btn btn-primary",children:"Sign-up"})})})},O=function(){return Object(o.jsx)("div",{children:Object(o.jsx)(i.b,{to:"/profile",children:Object(o.jsx)("button",{className:"btn btn-primary",children:"View Profile"})})})},p=(a(108),function(){var e=localStorage.getItem("userId");return Object(o.jsx)("div",{className:"col-6 welcome-col",children:Object(o.jsxs)("div",{className:"welcome",children:[Object(o.jsxs)("h1",{children:[Object(o.jsx)("strong",{children:"Welcome to Haggle!"})," "]}),Object(o.jsx)("h5",{children:" Trade what you have to get what you want. "}),e?Object(o.jsx)(O,{}):Object(o.jsx)(g,{})]})})}),f=a.p+"static/media/handshake.b9d7d414.jpeg",v=function(e){var t=e.listings,a=localStorage.getItem("userId");return Object(o.jsx)("div",{className:"col-6 carousel-img ",children:Object(o.jsx)("main",{className:"container container-fluid my-5 carousel-custom car-img",children:Object(o.jsxs)("div",{id:"carouselExampleCaptions",className:"carousel slide","data-bs-ride":"carousel",children:[Object(o.jsxs)("div",{className:"carousel-inner",style:{border:"3px solid rgb(230, 228, 228)"},children:[Object(o.jsxs)("div",{className:"carousel-item active",children:[Object(o.jsx)("img",{src:f,className:"d-block w-100",alt:"Landing page image"}),Object(o.jsxs)("div",{className:"carousel-caption carousel-caption-custom",children:[Object(o.jsx)("h5",{children:"Welcome to Haggle!"}),Object(o.jsx)("p",{children:"Scroll through to see current listings!"})]})]}),t.filter((function(e){return e.user!==a})).map((function(e){return Object(o.jsxs)("div",{className:"carousel-item",children:[Object(o.jsx)("img",{src:e.image_path,className:"d-block w-100",alt:"..."}),Object(o.jsxs)("div",{className:"carousel-caption carousel-caption-custom",children:[Object(o.jsx)("h5",{children:e.title}),Object(o.jsx)("p",{children:e.description})]})]},e._id)}))]}),Object(o.jsxs)("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#carouselExampleCaptions","data-bs-slide":"prev",children:[Object(o.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(o.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),Object(o.jsxs)("button",{className:"carousel-control-next",type:"button","data-bs-target":"#carouselExampleCaptions","data-bs-slide":"next",children:[Object(o.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(o.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})})})};var N=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(s.useEffect)((function(){x.getListings().then((function(e){return c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(o.jsx)("div",{className:"container carousel-container",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)(p,{}),Object(o.jsx)(v,{listings:a})]})})},y=a(10),S=function(e){var t,a,c,n=e.haggleTitle,i=e.haggleUser,d=e.haggleId,j=e.haggleStatus,b=e.haggleEmail,u=Object(s.useState)({}),m=Object(r.a)(u,2),g=m[0],O=m[1],p=localStorage.getItem("userId"),f=g.listings||[],v=Object(s.useState)(""),N=Object(r.a)(v,2),S=N[0],w=N[1],L=Object(s.useState)(""),C=Object(r.a)(L,2),F=C[0],I=C[1],_=Object(s.useState)(!1),k=Object(r.a)(_,2),E=k[0],M=k[1],U=Object(s.useState)(!1),A=Object(r.a)(U,2),T=A[0],H=A[1],P=Object(s.useState)(""),D=Object(r.a)(P,2),B=D[0],W=D[1],q=Object(s.useState)(""),R=Object(r.a)(q,2),z=R[0],V=R[1],$=Object(s.useState)(!1),Z=Object(r.a)($,2),J=Z[0],G=Z[1];return Object(s.useEffect)((function(){x.getUser(p).then((function(e){var t=e.data;console.log(e.data);for(var a=e.data.total_ratings,s=0,c=0;c<a.length;c++)s=a[c]+s,console.log(s);s={averageRating:s/a.length},console.log(s),O(t),console.log(g)})).catch((function(e){return console.log(e)}))}),[p]),Object(o.jsx)(o.Fragment,{children:J?Object(o.jsx)(l.a,{to:"/profile"}):Object(o.jsxs)("div",{children:["Active"===j?Object(o.jsxs)("button",{type:"button",className:"btn btn-primary mt-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ","Start Haggle"]}):Object(o.jsxs)("button",{type:"button",className:"btn btn-primary mt-2 mb-2","data-bs-toggle":"modal","data-bs-target":"#exampleModal",disabled:!0,children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ",j," Haggle"]}),Object(o.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:E?Object(o.jsx)("div",{className:"modal-dialog",children:T?Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsxs)("h1",{className:"text-center",children:["Nice"," ",Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ","Haggling!"]}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsx)("div",{className:"modal-body",children:Object(o.jsx)("button",(t={type:"button",className:"btn btn-primary"},Object(y.a)(t,"type","button"),Object(y.a)(t,"data-bs-dismiss","modal"),Object(y.a)(t,"onClick",(function(){G(!0)})),Object(y.a)(t,"children","Close"),t))})]}):Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsxs)("h5",{className:"text-center",children:["We're"," ",Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ","Haggling!"]}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsxs)("div",{className:"modal-body",children:["Contact ",i,Object(o.jsx)("br",{}),Object(o.jsx)("br",{}),Object(o.jsxs)("p",{children:["Subject: ",B]}),Object(o.jsxs)("p",{children:["Click the button below to send ",i," a message asking them to accept your Haggle!"]})]}),Object(o.jsx)("div",{className:"modal-footer",children:Object(o.jsx)("a",(a={type:"button",className:"btn btn-primary"},Object(y.a)(a,"type","submit"),Object(y.a)(a,"href","mailto:"+b+"?subject="+B+"&body="+z),Object(y.a)(a,"onClick",(function(){H(!0)})),Object(y.a)(a,"children","Send Haggle"),a))})]})}):Object(o.jsx)("div",{className:"modal-dialog",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsxs)("h5",{className:"text-center",children:["Let's"," ",Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ","Haggle!"]}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsxs)("div",{className:"modal-body",children:["Which of your listings do you want to"," ",Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-hands-helping"})})," ","Haggle with ",i," for his ",n,"?"]}),f.length>0?Object(o.jsx)("div",{className:"modal-body",children:f.map((function(e){return Object(o.jsxs)("div",{children:[Object(o.jsx)("input",{className:"form-check-input",type:"radio",name:"myHaggle",id:e._id,value:e._id,onClick:function(){w(e._id),I(e.title)}})," ",Object(o.jsx)("label",{className:"form-check-label",htmlFor:"myHaggle",children:e.title})]},e._id)}))}):Object(o.jsx)("div",{className:"modal-body",children:"You have no Listings. Please return to your Profile and create a Listing!"}),Object(o.jsx)("div",{className:"modal-footer",children:Object(o.jsx)("button",(c={type:"button",className:"btn btn-primary"},Object(y.a)(c,"type","submit"),Object(y.a)(c,"onClick",(function(){h.a.put("/api/listings/"+S,{status:"Pending"}).then((function(e){h.a.put("/api/listings/"+d,{status:"Pending"}).then((function(e){M(!0),W("Let's Haggle"),V("Hi ".concat(i,",%0D%0DI would like to trade you my ").concat(F," for your ").concat(n,".%0D%0DBoth items have been set to Pending.%0D%0DIf you accept this Haggle, please click here: https://proj-three-haggle.herokuapp.com/listings/").concat(d," and edit your listing to set it as Accepted.%0D%0DThen we can setup a way to complete this transaction%0D%0DLet's Haggle!"))}))})).catch((function(e){return console.log(e)}))})),Object(y.a)(c,"children","Select Haggle"),c))})]})})})]})})};var w=function(){var e=Object(s.useState)(),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(),i=Object(r.a)(n,2),d=i[0],j=i[1],b=Object(s.useState)(),u=Object(r.a)(b,2),m=u[0],g=u[1],O=Object(s.useState)(),p=Object(r.a)(O,2),f=p[0],v=p[1],N=Object(s.useState)(!1),y=Object(r.a)(N,2),w=y[0],L=y[1],C=Object(s.useState)({}),F=Object(r.a)(C,2),I=F[0],_=F[1],k=Object(s.useState)(!1),E=Object(r.a)(k,2),M=E[0],U=E[1],A=Object(s.useState)(!1),T=Object(r.a)(A,2),H=T[0],P=T[1],D=Object(l.g)().id,B=I.user||{},W=localStorage.getItem("userId");return Object(s.useEffect)((function(){x.getListing(D).then((function(e){var t=e.data;t.user._id===W&&P(!0),_(t)})).catch((function(e){return console.log(e)}))}),[D]),Object(o.jsx)(o.Fragment,{children:M||w?Object(o.jsx)(l.a,{to:"/profile"}):Object(o.jsx)("div",{className:" container container-fluid my-5 card",id:"listing-div",children:Object(o.jsxs)("div",{className:"row ",style:{margin:"20px auto"},children:[Object(o.jsx)("div",{className:"col-md-6",children:Object(o.jsx)("img",{src:I.image_path,alt:I.title,className:"img-fluid img-thumbnail"})}),Object(o.jsx)("div",{className:"col-md-6",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h2",{className:"card-title",children:I.title}),Object(o.jsx)("p",{className:"card-text",children:I.description}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Created by: ",B.name," on ",I.date_created]})}),Object(o.jsxs)("p",{children:["Category: ",I.category]}),Object(o.jsxs)("p",{children:["Status: ",I.status]}),H?Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",className:"btn btn-info mt-4 mb-4 btn-primary","data-bs-toggle":"modal","data-bs-target":"#editModal",onClick:function(){I.user,x.updateListing({id:"",title:Response.title,description:Response.description,category:Response.category,status:Response.status})},children:"Edit"}),Object(o.jsx)("div",{className:"modal fade",id:"editModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(o.jsx)("div",{className:"modal-dialog",children:Object(o.jsxs)("div",{className:"modal-content",children:[Object(o.jsxs)("div",{className:"modal-header",children:[Object(o.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Edit Listing"}),Object(o.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(o.jsx)("div",{className:"modal-body",children:Object(o.jsxs)("form",{className:"form new-project-form",children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"email-login",children:"Listing Title"}),Object(o.jsx)("textarea",{className:"form-input",type:"text",id:"",placeholder:I.title,onChange:function(e){return c(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password-login",children:"listing Description"}),Object(o.jsx)("textarea",{className:"form-input",type:"text",id:"",placeholder:I.description,onChange:function(e){return j(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"listing-category",children:"Categories:"}),Object(o.jsxs)("select",{onChange:function(e){return g(e.target.value)},className:"form-control",type:"text",id:"listing-category",name:"listing_category",children:[Object(o.jsx)("option",{value:"Automobiles",children:"Automobiles"}),Object(o.jsx)("option",{value:"Clothing",children:"Clothing"}),Object(o.jsx)("option",{value:"Farm Equipment",children:"Farm Equipment"}),Object(o.jsx)("option",{value:"Furniture",children:"Furniture"}),Object(o.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"}),Object(o.jsx)("option",{value:"Skilled Labor",children:"Skilled Labor"}),Object(o.jsx)("option",{value:"Unskilled Labor",children:"Unskilled Labor"})]})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"listing-status",children:"Status:"}),Object(o.jsxs)("select",{onChange:function(e){return v(e.target.value)},className:"form-control",type:"text",id:"listing-status",name:"listing-status",children:[Object(o.jsx)("option",{value:"Active",children:"Active"}),Object(o.jsx)("option",{value:"Pending",children:"Pending"}),Object(o.jsx)("option",{value:"Accepted",children:"Accepted"})]})]})]})}),Object(o.jsxs)("div",{className:"modal-footer",children:[Object(o.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-dismiss":"modal",children:"Close"}),Object(o.jsx)("button",{type:"submit",className:"btn btn-primary","data-bs-dismiss":"modal",onClick:function(){h.a.put("/api/listings/"+D,{title:a,description:d,category:m,status:f}).then((function(e){L(!0)})).catch((function(e){return console.log(e)}))},children:"Save changes"})]})]})})})]}):Object(o.jsx)(o.Fragment,{children:W?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:Object(o.jsxs)("button",{className:"btn btn-primary mt-2 mb-2",onClick:function(){h.a.put("/api/users/favorites/"+W,{$addToSet:{favorites:[I._id]}}).then((function(e){U(!0)})).catch((function(e){return console.log(e)}))},children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-thumbs-up"})})," ","Mark Favorite"]})}),Object(o.jsx)(S,{haggleTitle:I.title,haggleStatus:I.status,haggleUser:B.name,haggleId:I._id,haggleEmail:B.username})]}):Object(o.jsx)("div",{children:Object(o.jsxs)("a",{className:"btn btn-info m2-4 mb-2",href:"/login",children:[Object(o.jsx)("span",{role:"img","aria-label":"money",children:Object(o.jsx)("i",{className:"fas fa-thumbs-up"})})," ","Mark Favorite"]})})})]})})]})})})};var L=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1],n=localStorage.getItem("userId");Object(s.useEffect)((function(){x.getListings().then((function(e){c(e.data)})).catch((function(e){return console.log(e)}))}),[]);var i=function(e){var t=e.substring(0,10).split("-"),a=t[0],s=t[1],c=t[2];return"".concat(s,"/").concat(c,"/").concat(a)};return Object(o.jsx)("main",{className:"container container-fluid my-5 carousel-custom",children:a.filter((function(e){return e.user!==n})).map((function(e){return Object(o.jsx)("div",{className:"card my-3 mx-auto",style:{maxWidth:"540px"},children:Object(o.jsxs)("div",{className:"row g-0",children:[Object(o.jsx)("div",{className:"col-md-4",children:Object(o.jsx)("img",{src:e.image_path,alt:e.title,className:"my-listing-photo"})}),Object(o.jsx)("div",{className:"col-md-8",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{className:"card-title",children:e.title}),Object(o.jsx)("p",{className:"card-text",children:e.description}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Created on ",i(e.date_created)]})}),Object(o.jsx)("a",{className:"btn btn-primary",id:"listing-view",href:"/listings/".concat(e._id),children:"View Listing"})]})})]})},e._id)}))})};a(25);var C=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),l=Object(r.a)(n,2),d=l[0],j=l[1],b=Object(s.useState)(!1),u=Object(r.a)(b,2),m=(u[0],u[1]);return Object(s.useEffect)((function(){window.location.reload.bind(window.location)})),Object(o.jsx)("div",{className:"container container-fluid ",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-6",style:{color:"#fff",margin:"50px auto"},children:[Object(o.jsx)("h2",{children:"Login"}),Object(o.jsxs)("form",{className:"form new-project-form",children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"email-login",children:"Email:"}),Object(o.jsx)("input",{className:"form-input",type:"text",id:"email-login",onChange:function(e){return c(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password-login",children:"Password:"}),Object(o.jsx)("input",{className:"form-input",type:"password",id:"password-login",onChange:function(e){return j(e.target.value)}})]}),Object(o.jsx)("div",{className:"form-group",style:{marginTop:"20px"},children:Object(o.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:function(e){e.preventDefault(),x.verifyUser({username:a,password:d,withCredentials:!0}).then((function(e){e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userInfo.$__._id),localStorage.setItem("expiresAt",e.data.expiresAt),m(!0),window.location.replace("/profile")),console.log(e)})).catch((function(e){console.log(e)}))},children:"Login"})})]}),Object(o.jsxs)("div",{style:{marginTop:"20px"},children:[Object(o.jsx)("p",{children:"Don't have an account?"}),Object(o.jsx)(i.b,{to:"/signup",children:Object(o.jsx)("button",{className:"btn btn-primary",children:"Sign-up"})})]})]})})})};var F=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),d=Object(r.a)(n,2),j=d[0],b=d[1],u=Object(s.useState)(""),m=Object(r.a)(u,2),g=m[0],O=m[1],p=Object(s.useState)(""),f=Object(r.a)(p,2),v=f[0],N=f[1],y=Object(s.useState)(null),S=Object(r.a)(y,2),w=(S[0],S[1],Object(s.useState)({})),L=Object(r.a)(w,2),C=L[0],F=L[1],I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#3089cf",a=(document.querySelector("#oc-alert-container"),document.createElement("div")),s=document.createTextNode(e);a.setAttribute("class","oc-alert-pop-up"),$(a).css("background",t),a.appendChild(s),setTimeout((function(){$(a).remove()}),3e3)};return Object(o.jsx)("div",{children:v?Object(o.jsx)(l.a,{to:"/login",registeredUser:v}):Object(o.jsx)("div",{className:"container container-fluid",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",style:{color:"#fff"},children:[Object(o.jsx)("h2",{children:"Sign-up"}),Object(o.jsxs)("form",{className:"form new-project-form",children:[Object(o.jsxs)("div",{className:"col-md-6",style:{float:"left"},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"name-signup",children:"Name:"}),Object(o.jsx)("input",{className:"form-input",type:"text",id:"name-signup",onChange:function(e){return c(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"email-signup",children:"Email:"}),Object(o.jsx)("input",{className:"form-input",type:"text",id:"email-signup",onChange:function(e){return b(e.target.value)}})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password-signup",children:"Password:"}),Object(o.jsx)("input",{className:"form-input",type:"password",id:"password-signup",onChange:function(e){return O(e.target.value)}})]}),Object(o.jsx)("div",{className:"form-group",style:{marginTop:"20px"},children:Object(o.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:function(e){e.preventDefault();var t=new FormData,s=C.imagePath;if(s){for(var c=0;c<s.length;c++)t.append("profileImage",s[c],s[c].name);h.a.post("/api/upload/single-upload",t,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){if(200===e.status)if(e.data.error)"LIMIT_FILE_SIZE"===e.data.error.code?I("Max size: 2MB","red"):I(e.data.error,"red");else{var t=e.data.location;I("File Uploaded","#3089cf"),x.createUser({name:a,username:j,password:g,picture_path:t,withCredentials:!0}).then((function(e){N(!0)})).catch((function(e){N(!1)}))}})).catch((function(e){I(e,"red")}))}else I("Please upload file","red")},children:"Sign-up"})}),Object(o.jsxs)("div",{style:{marginTop:"20px"},children:[Object(o.jsx)("p",{children:"Already have an account?"}),Object(o.jsx)(i.b,{to:"/login",children:Object(o.jsx)("button",{className:"btn btn-primary",children:"Login"})})]})]}),Object(o.jsx)("div",{id:"oc-alert-container form-group"}),Object(o.jsxs)("div",{className:"card border-light mb-3 col-md-6 upload-card ",style:{float:"right",boxShadow:"0 5px 10px 2px rgba(195,192,192,.5)",marginTop:"50px"},children:[Object(o.jsxs)("div",{className:"card-header",children:[Object(o.jsx)("h3",{style:{color:"#555",marginLeft:"12px"},children:"Single Image Upload"}),Object(o.jsx)("p",{className:"text-muted",style:{marginLeft:"12px"},children:"Upload Size: 250px x 250px ( Max 5MB )"})]}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("p",{className:"card-text",children:"Please upload an image for your profile"}),Object(o.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files;F({imagePath:t})}})]})]})]})]})})})})},I=a(78),_=(a(109),function(){var e=Object(s.useState)(null),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(null),i=Object(r.a)(n,2),l=i[0],d=i[1];return Object(o.jsx)(o.Fragment,{children:Object(I.a)(Array(5)).map((function(e,t){var s=t+1;return Object(o.jsxs)("label",{children:[Object(o.jsx)("input",{id:"star-input",type:"radio",name:"rating",value:s,onClick:function(){return c(s)}}),Object(o.jsx)(b.b,{className:"star",color:s<=(l||a)?"#ffc107":"#8b8b8c",onMouseEnter:function(){return d(s)},onMouseLeave:function(){return d(null)}})]},s)}))})}),k=function(e){var t=e.users;return Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{children:Object(o.jsx)("h2",{className:"ml-3",style:{color:"white"},children:Object(o.jsxs)("strong",{children:["Welcome ",t.name,"! "]})})}),Object(o.jsxs)("div",{className:"card",style:{background:"",width:"18rem"},children:[Object(o.jsx)("img",{src:t.picture_path,className:"card-img-top img-thumbnail rounded-circle z-depth-2",alt:"..."}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("p",{className:"card-text",children:t.email}),Object(o.jsx)("p",{className:"card-text",children:" Rating"}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsx)(_,{})})]})]})]})},E=function(e){var t=e.deleteListing,a=e.id;return Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"btn btn-danger",id:"delete-btn",onClick:function(){return t(a)},children:Object(o.jsx)(b.c,{})})})},M=function(e){var t=e.myListings,a=(e.users,e.setUpdate,e.loggedIn,t._id),c=Object(s.useState)(!1),n=Object(r.a)(c,2),i=n[0],d=n[1];return Object(o.jsx)(o.Fragment,{children:i?Object(o.jsx)(l.a,{to:"/profile"}):Object(o.jsx)("div",{className:"accordion accordion-flush",id:"accordionFlushExample",children:Object(o.jsxs)("div",{className:"accordion-item",children:[Object(o.jsx)("h2",{className:"accordion-header",id:"flush-headingOne",children:Object(o.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne",children:t.title})}),Object(o.jsx)("div",{id:"flush-collapseOne",className:"accordion-collapse collapse","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample",children:Object(o.jsx)("div",{className:"accordion-body",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-md-12",style:{marginBottom:"20px"},children:Object(o.jsxs)("small",{className:"text-muted",children:["Created on ",t.date_created]})}),Object(o.jsx)("div",{className:"col-md-6 ",children:Object(o.jsx)("img",{src:t.image_path,alt:t.title,className:" img-thumbnail"})}),Object(o.jsx)("div",{className:"col-md-6",style:{fontSize:"11px"},children:t.description}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",style:{margin:" 20px auto"},children:[Object(o.jsx)("div",{className:"col-md-6",style:{float:"left"},children:Object(o.jsxs)("a",{className:"btn btn-primary",id:"listing-view",href:"/listings/".concat(t._id),children:[" ","View Listing"]})}),Object(o.jsx)("div",{className:"col-md-1",style:{float:"right"},children:Object(o.jsx)(E,{deleteListing:function(e){x.deleteListing(e).then((function(e){return d(!0)})).catch((function(e){return console.log(e)}))},id:a})})]})})]})})})]})},t._id)})},U=function(e){var t=e.myFavorites;return Object(o.jsx)("div",{children:Object(o.jsx)("div",{className:"card w-100 ",style:{marginBottom:"20px"},children:Object(o.jsxs)("div",{className:"card-body row",children:[Object(o.jsx)("a",{type:"button",style:{color:"#212529"},href:"/listings/".concat(t._id),children:Object(o.jsx)("div",{children:Object(o.jsx)("h5",{className:"card-title col-md-12",children:t.title})})}),Object(o.jsx)("div",{className:"col-md-4",style:{float:"left"},children:Object(o.jsx)("img",{src:t.image_path,className:"img-thumbnail",alt:"..."})}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsxs)("p",{className:"card-text",children:[t.description,"."]}),Object(o.jsx)("p",{className:"card-text",children:Object(o.jsxs)("small",{className:"text-muted",children:["Created on ",function(e){var t=e.substring(0,10).split("-"),a=t[0],s=t[1],c=t[2];return"".concat(s,"/").concat(c,"/").concat(a)}(t.date_created)]})}),Object(o.jsx)("a",{className:"btn btn-primary",id:"listing-view",href:"/listings/".concat(t._id),children:"View Listing"})]})]})})},t._id)};var A=function(){var e=Object(s.useState)(),t=Object(r.a)(e,2),a=(t[0],t[1]),c=Object(s.useState)({}),n=Object(r.a)(c,2),l=n[0],d=n[1],j=localStorage.getItem("userId"),b=l.listings||[],u=l.favorites||[],m=Object(s.useState)(!0),h=Object(r.a)(m,2),g=h[0];return h[1],Object(s.useEffect)((function(){x.getUser(j).then((function(e){for(var t=e.data,a=e.data.total_ratings,s=0,c=0;c<a.length;c++)s=a[c]+s;s={averageRating:s/a.length},d(t)})).catch((function(e){return console.log(e)}))}),[j]),Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-md-4",children:[Object(o.jsx)(k,{users:l}),Object(o.jsxs)("div",{className:"col-md-12 myListing",children:[Object(o.jsx)("h2",{style:{color:"#fff"},children:Object(o.jsx)("strong",{children:"My Listings"})}),b.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(M,{myListings:e,users:l,setUpdate:a,loggedIn:g},e._id)})})),Object(o.jsx)("br",{}),Object(o.jsx)(i.b,{to:"/new-listing",children:Object(o.jsx)("button",{className:"btn btn-primary",children:"New Listing"})})]})]}),Object(o.jsxs)("div",{className:"col-md-6 myFavorites",children:[Object(o.jsx)("h2",{style:{color:"#fff"},children:Object(o.jsx)("strong",{children:"My Favorites"})}),u.map((function(e){return Object(o.jsx)("div",{children:Object(o.jsx)(U,{myFavorites:e})})}))]})]})})};a(110);var T=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"404 Page Not Found"}),Object(o.jsx)("h1",{children:Object(o.jsx)("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji",children:"\ud83d\ude44"})})]})},H=a(29),P=a(30),D=a(32),B=a(31),W=a(14),q=a.n(W),R=function(e){Object(D.a)(a,e);var t=Object(B.a)(a);function a(e){var s;return Object(H.a)(this,a),(s=t.call(this,e)).singleFileChangedHandler=function(e){s.setState({selectedFile:e.target.files[0]})},s.singleFileUploadHandler=function(e){var t=new FormData;s.state.selectedFile?(t.append("profileImage",s.state.selectedFile,s.state.selectedFile.name),h.a.post("/api/upload/single-upload",t,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){if(200===e.status)if(e.data.error)"LIMIT_FILE_SIZE"===e.data.error.code?s.ocShowAlert("Max size: 2MB","red"):(console.log(e.data),s.ocShowAlert(e.data.error,"red"));else{var t=e.data;console.log("fileName",t),s.ocShowAlert("File Uploaded","#3089cf")}})).catch((function(e){s.ocShowAlert(e,"red")}))):s.ocShowAlert("Please upload file","red")},s.ocShowAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#3089cf",a=document.querySelector("#oc-alert-container"),s=document.createElement("div"),c=document.createTextNode(e);s.setAttribute("class","oc-alert-pop-up"),q()(s).css("background",t),s.appendChild(c),a.appendChild(s),setTimeout((function(){q()(s).fadeOut("slow"),q()(s).remove()}),3e3)},s.state={selectedFile:null,selectedFiles:null},s}return Object(P.a)(a,[{key:"render",value:function(){return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("div",{id:"oc-alert-container"}),Object(o.jsxs)("div",{className:"card border-light mb-3 mt-5",style:{boxShadow:"0 5px 10px 2px rgba(195,192,192,.5)"},children:[Object(o.jsxs)("div",{className:"card-header",children:[Object(o.jsx)("h3",{style:{color:"#555",marginLeft:"12px"},children:"Single Image Upload"}),Object(o.jsx)("p",{className:"text-muted",style:{marginLeft:"12px"},children:"Upload Size: 250px x 250px ( Max 2MB )"})]}),Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("p",{className:"card-text",children:"Please upload an image for your profile"}),Object(o.jsx)("input",{type:"file",onChange:this.singleFileChangedHandler}),Object(o.jsx)("div",{className:"mt-5",children:Object(o.jsx)("button",{className:"btn btn-info",onClick:this.singleFileUploadHandler,children:"Upload!"})})]})]})]})})}}]),a}(s.Component);s.Component;var z=a(43);var V=function(){var e=Object(s.useState)({}),t=Object(r.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)({}),i=Object(r.a)(n,2),l=i[0],d=i[1];function j(e){var t=e.target,s=t.name,n=t.value,i=e.target.files;c(Object(z.a)(Object(z.a)({},a),{},Object(y.a)({},s,n))),d({imagePath:i})}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#3089cf",a=document.querySelector("#oc-alert-container"),s=document.createElement("div"),c=document.createTextNode(e);s.setAttribute("class","oc-alert-pop-up"),q()(s).css("background",t),s.appendChild(c),a.appendChild(s),setTimeout((function(){q()(s).fadeOut("slow"),q()(s).remove()}),3e4)}return Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"row mt-4",children:Object(o.jsxs)("div",{className:"col-md-6",style:{color:"#fff",marginTop:"50px"},children:[Object(o.jsx)("h2",{children:Object(o.jsx)("strong",{children:"Create a New Listing:"})}),Object(o.jsxs)("form",{className:"form new-project-form",children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"listing-name",children:"Listing Name:"}),Object(o.jsx)("input",{onChange:j,className:"form-input",type:"text",id:"listing-name",name:"listing_name"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"listing-desc",children:"Listing Description:"}),Object(o.jsx)("textarea",{onChange:j,className:"form-input",type:"text",id:"listing-desc",name:"listing_desc"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"listing-category",children:"Categories:"}),Object(o.jsxs)("select",{onChange:j,className:"form-control",type:"text",id:"listing-category",name:"listing_category",value:"Automobiles",children:[Object(o.jsx)("option",{value:"Automobiles",children:"Automobiles"}),Object(o.jsx)("option",{value:"Clothing",children:"Clothing"}),Object(o.jsx)("option",{value:"Farm Equipment",children:"Farm Equipment"}),Object(o.jsx)("option",{value:"Furniture",children:"Furniture"}),Object(o.jsx)("option",{value:"Miscellaneous",children:"Miscellaneous"}),Object(o.jsx)("option",{value:"Skilled Labor",children:"Skilled Labor"}),Object(o.jsx)("option",{value:"Unskilled Labor",children:"Unskilled Labor"})]}),Object(o.jsx)("input",{type:"hidden",id:"listing-status",name:"listing_status",value:"1"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("div",{id:"oc-alert-container"}),Object(o.jsxs)("div",{className:"card border-light mb-3",style:{boxShadow:"0 5px 10px 2px rgba(195,192,192,.5)"},children:[Object(o.jsxs)("div",{className:"card-header",children:[Object(o.jsx)("h3",{style:{color:"#555",marginLeft:"12px"},children:"Upload Muliple Images"}),Object(o.jsx)("p",{className:"text-muted",style:{marginLeft:"12px"},children:"Upload Size: Max 5MB"})]}),Object(o.jsxs)("div",{className:"card-body",style:{color:"#555",marginLeft:"12px"},children:[Object(o.jsx)("p",{className:"card-text",children:"Please upload the Gallery Images for your gallery"}),Object(o.jsx)("input",{type:"file",multiple:!0,onChange:j})]})]})]}),Object(o.jsx)("div",{className:"form-group",children:Object(o.jsx)("button",{id:"listing-create",type:"submit",className:"btn btn-primary mt-4 mb-4",onClick:function(e){e.preventDefault();var t=new FormData,s=l.imagePath;if(s){for(var c=0;c<s.length;c++)t.append("galleryImage",s[c],s[c].name);h.a.post("/api/upload/multiple-file-upload",t,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then((function(e){if(200===e.status)if(e.data.error)"LIMIT_FILE_SIZE"===e.data.error.code?b("Max size: 5MB","red"):"LIMIT_UNEXPECTED_FILE"===e.data.error.code?b("Max 4 images allowed","red"):b(e.data.error,"red");else{var t=e.data.locationArray;b("File Uploaded","#3089cf"),x.saveListing({title:a.listing_name,description:a.listing_desc,date_created:Date.now(),category:a.listing_category,status:"Active",user:localStorage.getItem("userId"),image_path:t}).then((function(e){x.updateUser({user:localStorage.getItem("userId"),listing:e.data._id}).then((function(e){window.location.replace("/profile")})).catch((function(e){console.log(e)}))}))}})).catch((function(e){b(e,"red")}))}else b("Please upload file","red")},children:"Create Listing"})})]})]})})})};a(517);var Z=function(){return Object(o.jsx)("div",{className:"flex-column justify-space-around ",children:Object(o.jsx)(i.a,{children:Object(o.jsxs)(l.d,{children:[Object(o.jsxs)(l.b,{exact:!0,path:"/",children:[Object(o.jsx)(u,{}),Object(o.jsx)(N,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/new-listing",children:[Object(o.jsx)(u,{}),Object(o.jsx)(V,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/listings",children:[Object(o.jsx)(u,{}),Object(o.jsx)(L,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/listings/:id",children:[Object(o.jsx)(u,{}),Object(o.jsx)(w,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/profile/:id",children:[Object(o.jsx)(u,{}),Object(o.jsx)(A,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/profile/",children:[Object(o.jsx)(u,{}),Object(o.jsx)(A,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/login",children:[Object(o.jsx)(u,{}),Object(o.jsx)(C,{})]}),Object(o.jsxs)(l.b,{exact:!0,path:"/signup",children:[Object(o.jsx)(u,{}),Object(o.jsx)(F,{})]}),Object(o.jsx)(l.b,{exact:!0,path:"/upload",children:Object(o.jsx)(R,{})}),Object(o.jsx)(l.b,{children:Object(o.jsx)(T,{})})]})})})};n.a.render(Object(o.jsx)(Z,{}),document.getElementById("root"))},83:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){}},[[518,1,2]]]);
//# sourceMappingURL=main.43c7643a.chunk.js.map